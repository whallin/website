---
import ImgHeaderBlog from "../../assets/header/headerBlog.jpg";
import BlogFeaturedPost from "../../components/blog/BlogFeaturedPost.astro";
import BlogRecentPosts from "../../components/blog/BlogRecentPosts.astro";
import PixelarticonsAlignLeft from "../../components/icons/PixelarticonsAlignLeft.astro";
import PixelarticonsClock from "../../components/icons/PixelarticonsClock.astro";
import PixelarticonsScriptText from "../../components/icons/PixelarticonsScriptText.astro";
import SidebarBase from "../../components/navigation/SidebarBase.astro";
import PageHeaderImg from "../../components/PageHeaderImg.astro";
import LayoutBase from "../../layouts/LayoutBase.astro";
import { calculateBlogStats } from "../../utils/blogStats";

const blogStats = await calculateBlogStats();

const stats = [
  {
    label: "Posts published",
    value: blogStats.totalPosts.toString(),
    Icon: PixelarticonsScriptText,
  },
  {
    label: "Total words",
    value: blogStats.totalWords,
    Icon: PixelarticonsAlignLeft,
  },
  {
    label: "Total time to read",
    value: blogStats.totalReadTime,
    Icon: PixelarticonsClock,
  },
];
---

<LayoutBase>
  <SidebarBase showLogo showReturn slot="sidebar">
    <div slot="content">
      <aside class="space-y-4 text-xs text-stone-500">
        {
          stats.map((stat) => (
            <div class="space-y-0.5">
              <span class="mb-1 flex items-center gap-1">
                <stat.Icon aria-hidden="true" class="h-4 w-4" />
                {stat.label}
              </span>
              <span class="font-mono text-stone-800 dark:text-stone-300">
                {stat.value}
              </span>
            </div>
          ))
        }
      </aside>
    </div>
  </SidebarBase>

  <div slot="content" class="space-y-12">
    <PageHeaderImg
      headerImgSrc={ImgHeaderBlog}
      headerImgAlt="Picture of William Hallin"
      headingText="The Hallin Blog"
      headingItalic={false}
      descriptionText="A collection of thoughts, ideas, insights, and opinions â€” authored by myself or featuring guest stars."
      btnText="Send a message"
      btnHref="/contact"
      btnAriaLabel="Contact William about the blog"
    />

    <BlogFeaturedPost />

    <hr class="border-stone-300 dark:border-stone-700" />

    <BlogRecentPosts />
  </div>
</LayoutBase>
