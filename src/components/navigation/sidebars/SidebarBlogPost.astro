---
import { calculateReadTime, formatDate } from "../../../utils/blog.ts";
import PixelarticonsCalendar from "../../icons/PixelarticonsCalendar.astro";
import PixelarticonsClock from "../../icons/PixelarticonsClock.astro";
import SidebarBase from "../SidebarBase.astro";

const { post } = Astro.props;
const locale = (Astro.currentLocale as "en" | "sv") ?? "en";
const timeToRead = calculateReadTime(post.body || "");
const formattedDate = formatDate(post.data.publishedDate, locale);

const translations = {
  en: {
    ariaLabel: "Article metadata",
    published: "Published",
    readTime: "Read time",
  },
  sv: {
    ariaLabel: "Artikelmetadata",
    published: "Publicerad",
    readTime: "LÃ¤stid",
  },
};
---

<SidebarBase showLogo showReturn>
  <div slot="content">
    <aside
      class="space-y-4 text-xs text-stone-500"
      aria-label={translations[locale].ariaLabel}
    >
      <div class="space-y-0.5">
        <span class="mb-1 flex items-center gap-1">
          <PixelarticonsCalendar aria-hidden="true" class="h-4 w-4" />
          {translations[locale].published}
        </span>
        <time
          datetime={post.data.publishedDate}
          class="font-mono text-stone-800 dark:text-stone-300"
        >
          {formattedDate}
        </time>
      </div>
      <div class="space-y-0.5">
        <span class="mb-1 flex items-center gap-1">
          <PixelarticonsClock aria-hidden="true" class="h-4 w-4" />
          {translations[locale].readTime}
        </span>
        <span class="font-mono text-stone-800 dark:text-stone-300">
          {timeToRead} min
        </span>
      </div>
    </aside>
  </div>
</SidebarBase>
