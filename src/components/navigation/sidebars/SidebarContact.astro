---
import PixelarticonsClock from "../../icons/PixelarticonsClock.astro";
import PixelarticonsSunAlt from "../../icons/PixelarticonsSunAlt.astro";
import SidebarBase from "../SidebarBase.astro";

const translations = {
  en: {
    currentTime: "Current time in SFT",
    currentWeather: "Current weather in SFT",
  },
  sv: {
    currentTime: "Aktuell tid i SFT",
    currentWeather: "VÃ¤rdet i SFT",
  },
};

const locale = (Astro.currentLocale as "en" | "sv") ?? "en";
---

<SidebarBase showLogo showReturn slot="sidebar">
  <div slot="content" data-locale={locale}>
    <aside class="space-y-4 text-xs text-stone-500">
      <div class="space-y-0.5">
        <span class="mb-1 flex items-center gap-1">
          <PixelarticonsClock aria-hidden="true" class="h-4 w-4" />
          {translations[locale].currentTime}
        </span>
        <time
          id="time-sweden"
          datetime=""
          aria-live="polite"
          class="font-mono text-stone-800 dark:text-stone-300">00:00:00</time
        >
      </div>
      <div class="space-y-0.5">
        <span class="mb-1 flex items-center gap-1">
          <PixelarticonsSunAlt aria-hidden="true" class="h-4 w-4" />
          {translations[locale].currentWeather}
        </span>
        <span
          id="weather-sweden"
          class="font-mono text-stone-800 dark:text-stone-300">Sunny</span
        >
      </div>
    </aside>
  </div>
</SidebarBase>

<script>
  import {
    updateDetailedWeather,
    type Language,
  } from "../../../utils/reportWeather";
  import "./SidebarContact";

  const locale = (document.documentElement.lang ?? "en") as Language;
  document.addEventListener("astro:page-load", () => {
    updateDetailedWeather(locale);
  });
</script>
