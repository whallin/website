---
import FormShell from "../forms/FormShell.astro";
import PixelarticonsArrowRight from "../icons/PixelarticonsArrowRight.astro";
import PixelarticonsBriefcase from "../icons/PixelarticonsBriefcase.astro";
import PixelarticonsMailCheck from "../icons/PixelarticonsMailCheck.astro";
import PixelarticonsMailDelete from "../icons/PixelarticonsMailDelete.astro";
import HireProjectContactInfo from "./HireProjectContactInfo.astro";
import HireProjectDetails from "./HireProjectDetails.astro";
import HireProjectPreferences from "./HireProjectPreferences.astro";

const locale = (Astro.currentLocale as "en" | "sv") ?? "en";

const translations = {
  en: {
    heading: "Start your project",
    description:
      "Ready to bring your vision to life? Fill out the form below with details about your project, and I'll get back to you within 24 to 48 hours with a personalized proposal.",
    securityAria: "Security verification",
    submitButton: "Send project inquiry",
    successMessage: "Project inquiry sent! I'll get back within 24 hours.",
    errorMessage: "Sending failed! Please try again.",
  },
  sv: {
    heading: "Starta ditt projekt",
    description:
      "Redo att förverkliga din vision? Fyll i formuläret med information om ditt projekt, så återkommer jag inom 24 till 48 timmar med ett personligt förslag.",
    securityAria: "Säkerhetsverifiering",
    submitButton: "Skicka projektförfrågan",
    successMessage:
      "Projektförfrågan skickades! Jag återkommer inom 24 timmar.",
    errorMessage: "Skickandet misslyckades! Försök igen.",
  },
};
---

<section class="space-y-8">
  <header class="space-y-4">
    <h2 class="font-serif text-2xl text-stone-800 dark:text-stone-100">
      <PixelarticonsBriefcase
        aria-hidden="true"
        class="mr-1 mb-1 inline-block"
      />
      {translations[locale].heading}
    </h2>
    <p class="leading-relaxed text-stone-600 dark:text-stone-400">
      {translations[locale].description}
    </p>
  </header>

  <FormShell
    formId="project-inquiry-form"
    turnstileId="turnstile-container"
    submitBtnId="project-submit-btn"
    submitText={translations[locale].submitButton}
    successId="project-success-message"
    errorId="project-error-message"
    errorTextId="project-error-text"
  >
    <div slot="fields" class="space-y-6">
      <HireProjectContactInfo />
      <HireProjectDetails />
      <HireProjectPreferences />
    </div>

    <PixelarticonsBriefcase
      slot="submit-icon"
      aria-hidden="true"
      class="h-4 w-4"
    />
    <PixelarticonsArrowRight
      slot="submit-icon"
      aria-hidden="true"
      class="h-4 w-4 transition-transform group-hover:translate-x-0.5"
    />

    <PixelarticonsMailCheck
      slot="success-icon"
      aria-hidden="true"
      class="h-4 w-4"
    />
    <span slot="success-text">{translations[locale].successMessage}</span>

    <PixelarticonsMailDelete
      slot="error-icon"
      aria-hidden="true"
      class="h-4 w-4"
    />
    <span slot="error-text">{translations[locale].errorMessage}</span>
  </FormShell>
</section>

<script>
  import "./HireProjectForm";
</script>
